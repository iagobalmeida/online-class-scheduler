{"ast":null,"code":"import connect from '../../utils/database';\nexport default (async (req, res) => {\n  // Se a requisição é do tipo POST\n  if (req.method === \"POST\") {\n    const {\n      name,\n      email,\n      cellphone,\n      isTeacher\n    } = req.body;\n\n    if (!name || !email || !cellphone || !isTeacher) {\n      res.status(400).json({\n        error: 'Missing body parameter'\n      });\n      return;\n    } // Conecta-se ao banco de dados\n\n\n    const {\n      db\n    } = await connect(); // Executa inserção na collection \"users\"\n\n    const response = await db.collection(\"users\").insertOne({\n      name,\n      email,\n      cellphone,\n      isTeacher\n    }); // Retorna na respose o JSON do response\n\n    res.status(200).json(response.ops[0]); // Se a requisição não for do tipo POST\n  } else {\n    // Retorna na respose a message\n    res.status(400).json({\n      error: 'Wrong requisition method'\n    });\n  }\n});","map":{"version":3,"sources":["/home/iago/Documentos/ProjetosNextJS/online-class-scheduler/pages/api/user.tsx"],"names":["connect","req","res","method","name","email","cellphone","isTeacher","body","status","json","error","db","response","collection","insertOne","ops"],"mappings":"AACA,OAAOA,OAAP,MAAoB,sBAApB;AAcA,gBAAe,OACXC,GADW,EAEXC,GAFW,KAGI;AAEf;AACA,MAAKD,GAAG,CAACE,MAAJ,KAAe,MAApB,EAA4B;AAExB,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA,KAAR;AAAeC,MAAAA,SAAf;AAA0BC,MAAAA;AAA1B,QAAwCN,GAAG,CAACO,IAAlD;;AAEA,QAAG,CAACJ,IAAD,IAAS,CAACC,KAAV,IAAmB,CAACC,SAApB,IAAiC,CAACC,SAArC,EAA+C;AAC3CL,MAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,QAAAA,KAAK,EAAC;AAAR,OAArB;AACA;AACH,KAPuB,CAUxB;;;AACA,UAAM;AAACC,MAAAA;AAAD,QAAO,MAAMZ,OAAO,EAA1B,CAXwB,CAYxB;;AACA,UAAMa,QAAQ,GAAG,MAAMD,EAAE,CAACE,UAAH,CAAc,OAAd,EAAuBC,SAAvB,CAAiC;AACpDX,MAAAA,IADoD;AAEpDC,MAAAA,KAFoD;AAGpDC,MAAAA,SAHoD;AAIpDC,MAAAA;AAJoD,KAAjC,CAAvB,CAbwB,CAmBxB;;AACAL,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,QAAQ,CAACG,GAAT,CAAa,CAAb,CAArB,EApBwB,CAsB5B;AACC,GAvBD,MAuBK;AACD;AACAd,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAArB;AACH;AACJ,CAjCD","sourcesContent":["import { NextApiRequest, NextApiResponse } from 'next';\nimport connect from '../../utils/database'\n\ninterface ErrorResponseType {\n    error: string\n}\n\ninterface SucessResponseType {\n    _id:        string,\n    name:       string,\n    cellphone:  string,\n    isTeacher:  boolean\n\n}\n\nexport default async(\n    req: NextApiRequest, \n    res: NextApiResponse<ErrorResponseType | SucessResponseType>\n):Promise<void> => {\n\n    // Se a requisição é do tipo POST\n    if ( req.method === \"POST\" ){\n\n        const { name, email, cellphone, isTeacher } = req.body;\n\n        if(!name || !email || !cellphone || !isTeacher){\n            res.status(400).json({ error:'Missing body parameter'});\n            return;\n        }\n\n\n        // Conecta-se ao banco de dados\n        const {db} = await connect();\n        // Executa inserção na collection \"users\"\n        const response = await db.collection(\"users\").insertOne({\n            name,\n            email,\n            cellphone,\n            isTeacher\n        });\n        // Retorna na respose o JSON do response\n        res.status(200).json(response.ops[0]);\n\n    // Se a requisição não for do tipo POST\n    }else{\n        // Retorna na respose a message\n        res.status(400).json({ error: 'Wrong requisition method'});\n    }\n}"]},"metadata":{},"sourceType":"module"}