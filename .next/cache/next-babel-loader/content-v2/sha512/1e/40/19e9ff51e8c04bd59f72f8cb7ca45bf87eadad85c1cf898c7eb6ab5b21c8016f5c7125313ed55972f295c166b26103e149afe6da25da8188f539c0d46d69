{"ast":null,"code":"import NextAuth from 'next-auth';\nimport Providers from 'next-auth/providers';\nimport connect from '../../../utils/database';\nexport default NextAuth({\n  session: {\n    jwt: true,\n    maxAge: 30 * 24 * 60 * 60\n  },\n  // Configure one or more authentication providers\n  providers: [Providers.Credentials({\n    // The name to display on the sign in form (e.g. 'Sign in with...')\n    name: 'Credentials',\n    // The credentials is used to generate a suitable form on the sign in page.\n    // You can specify whatever fields you are expecting to be submitted.\n    // e.g. domain, username, password, 2FA token, etc.\n    credentials: {\n      username: {\n        label: \"Username\",\n        type: \"text\",\n        placeholder: \"jsmith\"\n      },\n      password: {\n        label: \"Password\",\n        type: \"password\"\n      }\n    },\n\n    async authorize(credentials) {\n      // Add logic here to look up the user from the credentials supplied\n\n      /*const { db }   = await connect();\n      db.collection('users').findOne({email: credentials})*/\n      const {\n        username,\n        password\n      } = Object.create(credentials);\n\n      if (!username || !password) {\n        return null;\n      }\n\n      const {\n        db\n      } = await connect();\n      const user = await db.collection('users').findOne({\n        username: username,\n        password: password\n      });\n\n      if (user) {\n        // Any object returned will be saved in `user` property of the JWT\n        return user;\n      } else {\n        // If you return null or false then the credentials will be rejected\n        return null; // You can also Reject this callback with an Error or with a URL:\n        // throw new Error('error message') // Redirect to error page\n        // throw '/path/to/redirect'        // Redirect to a URL\n      }\n    }\n\n  })],\n  // A database is optional, but required to persist accounts in a database\n  database: process.env.DATABASE_URL\n});","map":{"version":3,"sources":["/home/iago/Documentos/ProjetosNextJS/online-class-scheduler/pages/api/auth/[...nextauth].ts"],"names":["NextAuth","Providers","connect","session","jwt","maxAge","providers","Credentials","name","credentials","username","label","type","placeholder","password","authorize","Object","create","db","user","collection","findOne","database","process","env","DATABASE_URL"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,WAArB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,OAAP,MAAoB,yBAApB;AAOA,eAAeF,QAAQ,CAAC;AACpBG,EAAAA,OAAO,EAAE;AACLC,IAAAA,GAAG,EAAE,IADA;AAELC,IAAAA,MAAM,EAAE,KAAK,EAAL,GAAU,EAAV,GAAe;AAFlB,GADW;AAKpB;AACAC,EAAAA,SAAS,EAAE,CACPL,SAAS,CAACM,WAAV,CAAsB;AAClB;AACAC,IAAAA,IAAI,EAAE,aAFY;AAGlB;AACA;AACA;AACAC,IAAAA,WAAW,EAAE;AACTC,MAAAA,QAAQ,EAAE;AAAEC,QAAAA,KAAK,EAAE,UAAT;AAAqBC,QAAAA,IAAI,EAAE,MAA3B;AAAmCC,QAAAA,WAAW,EAAE;AAAhD,OADD;AAETC,MAAAA,QAAQ,EAAE;AAAGH,QAAAA,KAAK,EAAE,UAAV;AAAsBC,QAAAA,IAAI,EAAE;AAA5B;AAFD,KANK;;AAUlB,UAAMG,SAAN,CAAgBN,WAAhB,EAA6B;AACzB;;AACA;AAChB;AAEgB,YAAM;AAAEC,QAAAA,QAAF;AAAYI,QAAAA;AAAZ,UAAyBE,MAAM,CAACC,MAAP,CAAcR,WAAd,CAA/B;;AAEA,UAAK,CAACC,QAAD,IAAa,CAACI,QAAnB,EAA8B;AAAE,eAAO,IAAP;AAAc;;AAE9C,YAAM;AAAEI,QAAAA;AAAF,UAAW,MAAMhB,OAAO,EAA9B;AACA,YAAMiB,IAAI,GAAG,MAAMD,EAAE,CAACE,UAAH,CAAc,OAAd,EAAuBC,OAAvB,CAA+B;AAACX,QAAAA,QAAQ,EAAEA,QAAX;AAAqBI,QAAAA,QAAQ,EAAEA;AAA/B,OAA/B,CAAnB;;AAGA,UAAIK,IAAJ,EAAU;AACN;AACA,eAAOA,IAAP;AACH,OAHD,MAGO;AACH;AACA,eAAO,IAAP,CAFG,CAGH;AACA;AACA;AACH;AACJ;;AAjCiB,GAAtB,CADO,CANS;AA2CpB;AACAG,EAAAA,QAAQ,EAAEC,OAAO,CAACC,GAAR,CAAYC;AA5CF,CAAD,CAAvB","sourcesContent":["import NextAuth from 'next-auth'\nimport Providers from 'next-auth/providers'\nimport connect from '../../../utils/database'\n\ninterface UserCredentials {\n    username: string,\n    password: string\n}\n\nexport default NextAuth({\n    session: {\n        jwt: true,\n        maxAge: 30 * 24 * 60 * 60\n    },\n    // Configure one or more authentication providers\n    providers: [\n        Providers.Credentials({\n            // The name to display on the sign in form (e.g. 'Sign in with...')\n            name: 'Credentials',\n            // The credentials is used to generate a suitable form on the sign in page.\n            // You can specify whatever fields you are expecting to be submitted.\n            // e.g. domain, username, password, 2FA token, etc.\n            credentials: {\n                username: { label: \"Username\", type: \"text\", placeholder: \"jsmith\" },\n                password: {  label: \"Password\", type: \"password\" }\n            },\n            async authorize(credentials) {\n                // Add logic here to look up the user from the credentials supplied\n                /*const { db }   = await connect();\n                db.collection('users').findOne({email: credentials})*/\n\n                const { username, password } = Object.create(credentials);\n\n                if ( !username || !password ) { return null; }\n\n                const { db }   = await connect();\n                const user = await db.collection('users').findOne({username: username, password: password})\n\n\n                if (user) {\n                    // Any object returned will be saved in `user` property of the JWT\n                    return user\n                } else {\n                    // If you return null or false then the credentials will be rejected\n                    return null\n                    // You can also Reject this callback with an Error or with a URL:\n                    // throw new Error('error message') // Redirect to error page\n                    // throw '/path/to/redirect'        // Redirect to a URL\n                }\n            }\n        })\n    ],\n    // A database is optional, but required to persist accounts in a database\n    database: process.env.DATABASE_URL,\n})"]},"metadata":{},"sourceType":"module"}